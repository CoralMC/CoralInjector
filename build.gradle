/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

buildscript {
    repositories {
        mavenCentral()
        maven {
        url "https://plugins.gradle.org/m2/"
        }   
    }
    dependencies {
        classpath "com.github.jengelman.gradle.plugins:shadow:4.0.3"
    }
}

apply plugin: "java"
apply plugin: "com.github.johnrengelman.shadow"

repositories {
    mavenCentral()
}

dependencies {
    // https://mvnrepository.com/artifact/net.bytebuddy/byte-buddy-gradle-plugin
    compile group: 'org.javassist', name: 'javassist', version: '3.24.0-GA'
    compile files("${System.getProperty('java.home')}/../lib/tools.jar")
}

jar {
  manifest {
    // Set the required manifest attributes for the Java agent, cf.
    // https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/package-summary.html.
    attributes 'Agent-Class': "com.coral.injector.agent.Agent"
    attributes 'Main-Class': "com.coral.injector.main.Injector"
    attributes 'Can-Retransform-Classes': true
    attributes 'Can-Redefine-Classes': true
  }
}